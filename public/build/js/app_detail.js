document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".app-detail-page");e&&async function(){e.innerHTML='\n            <div class="app">\n                <div class="app__container">\n                    <p>Cargando...</p>\n                </div>\n            </div>';try{const a=new URLSearchParams(location.search).get("id");if(!a)throw new Error("No hay ID de app.");const n=await fetch(`/api/aplicacion/detalle?id=${a}`);if(!n.ok)throw new Error("Aplicación no encontrada.");const t=await n.json(),c=await fetch("/api/empresas/listar");if(c.ok){const e=(await c.json()).find(e=>e.id==t.company_id);t.company_name=e?.name||"Empresa Desconocida"}else t.company_name="Empresa Desconocida";!function(a){const n=(t=a.company_name,t?.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_-]/g,"")||"undefined");var t;const c=a.image?`/build/img/apps/${n}/${a.image}`:`https://placehold.co/200x200?text=${encodeURIComponent(a.name)}`,o=a.download_url?`/build/apk/${n}/${a.download_url}`:"#",p=0===parseFloat(a.price)?"Instalar":`$${parseFloat(a.price).toFixed(2)}`;e.innerHTML="";const d=document.createElement("div");d.className="app";const i=document.createElement("div");i.className="app__container";const s=document.createElement("div");s.className="app__header";const l=document.createElement("div");l.className="app__image-wrapper";const r=document.createElement("img");r.className="app__image",r.src=c,r.alt=a.name,l.appendChild(r);const m=document.createElement("div");m.className="app__meta";const _=document.createElement("h2");_.className="app__title",_.textContent=a.name;const h=document.createElement("p");h.className="app__company",h.textContent=a.company_name||"Empresa Desconocida";const u=document.createElement("div");u.className="app__buttons";const C=document.createElement("button");C.textContent=p,a.download_url?C.addEventListener("click",()=>{window.location.href=o}):C.disabled=!0,u.appendChild(C),m.appendChild(_),m.appendChild(h),m.appendChild(u),s.appendChild(l),s.appendChild(m);const E=document.createElement("div");E.className="app__info";const v=document.createElement("h3");v.textContent="Acerca de esta app";const w=document.createElement("p");w.textContent=a.description||"No hay descripción disponible.",E.appendChild(v),E.appendChild(w),i.appendChild(s),i.appendChild(E),d.appendChild(i),e.appendChild(d)}(t)}catch(n){console.error(n),a=n.message,e.innerHTML=`\n            <div class="app">\n                <div class="app__container">\n                    <p>Error: ${a}</p>\n                    <a href="/apps">Volver al mercado</a>\n                </div>\n            </div>`}var a}()});