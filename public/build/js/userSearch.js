document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("#searchUser"),n=document.querySelector("#searchResults"),t=document.querySelector("#selectedAdmins"),i=document.querySelector("#adminsInput");let r=[];function d(){t.innerHTML="",r.forEach(e=>{const n=document.createElement("li");n.innerHTML=`\n        <strong>${e.name}</strong>\n        <small>${e.email}</small>\n        <button type="button" data-id="${e.id}">&times;</button>\n      `,n.querySelector("button").addEventListener("click",()=>{r=r.filter(n=>n.id!==e.id),d()}),t.appendChild(n)}),i.value=r.map(e=>e.id).join(",")}"undefined"!=typeof assignedAdmins&&Array.isArray(assignedAdmins)&&(r=assignedAdmins,d()),e.addEventListener("input",async t=>{const i=t.target.value.trim();if(i.length<2)return void(n.innerHTML="");const s=await fetch(`/api/users/search?query=${encodeURIComponent(i)}`),a=await s.json();n.innerHTML="",a.forEach(t=>{const i=document.createElement("div");i.innerHTML=`<strong>${t.name}</strong><br><small>${t.email}</small>`,i.addEventListener("click",()=>function(t){if(r.find(e=>e.id===t.id))return;r.push(t),d(),n.innerHTML="",e.value=""}(t)),n.appendChild(i)})})});